# osctl - Ð˜Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð¶Ð¸Ð·Ð½ÐµÐ½Ð½Ñ‹Ð¼ Ñ†Ð¸ÐºÐ»Ð¾Ð¼ Ð¸Ð½Ð´ÐµÐºÑÐ¾Ð² Ð¸ ÑÐ½Ð°Ð¿ÑˆÐ¾Ñ‚Ð¾Ð² OpenSearch

ÐŸÐ¾-ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ Ð¿Ñ€ÐµÐ´Ð¿Ð¾Ð»Ð°Ð³Ð°ÐµÑ‚ÑÑ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ `config.yaml` Ð² ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼ Ð¾Ð¿Ð¸ÑÐ°Ð½Ñ‹ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð·Ð°Ð¿ÑƒÑÐºÐ°. Ð”Ð»Ñ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ `action`.

Ð’ÑÐµ, Ñ‡Ñ‚Ð¾ ÑƒÐºÐ°Ð·Ð°Ð½Ð¾ Ð² ÐºÐ¾Ð½Ñ„Ð³Ð¸Ð°Ñ… Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿ÐµÑ€ÐµÐ¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÑÑ‚ÑŒ Ñ‡ÐµÑ€ÐµÐ· Ñ„Ð»Ð°Ð³Ð¸, Ð° Ñ‚Ð°ÐºÐ¶Ðµ Ð±Ð¾Ð»ÑŒÑˆÐ¸Ð½ÑÑ‚Ð²Ð¾ ÐºÐ¾Ð¼Ð°Ð½Ð´ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÑŽÑ‚ `--dry-run`.

## Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚

### Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¾Ð¼ action (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)
```bash
# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ config.yaml Ñ Ð½ÑƒÐ¶Ð½Ð¾Ð¹ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð¾Ð¹
cat > config.yaml << EOF
action: "snapshots"
opensearch_url: "https://your-opensearch:9200"
cert_file: "/path/to/cert.pem"
key_file: "/path/to/key.pem"
ca_file: "/path/to/ca.pem"
EOF

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ osctl - ÐºÐ¾Ð¼Ð°Ð½Ð´Ð° Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑÑ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸
osctl
osctl --dry-run
```

### Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ñ‡ÐµÑ€ÐµÐ· ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð¸ Ñ„Ð»Ð°Ð³Ð¸
```bash
osctl snapshots --config=custom_config.yaml --osctl-indices-config=custom_osctl_indices_config.yaml
```

## Ð”Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ (action)

| ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° | ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ |
|---------|------------|
| `snapshots` | Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÐ½Ð°Ð¿ÑˆÐ¾Ñ‚Ð¾Ð² ÑÐ¾Ð³Ð»Ð°ÑÐ½Ð¾ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ |
| `snapshotsdelete` | Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ ÑÐ½Ð°Ð¿ÑˆÐ¾Ñ‚Ð¾Ð² ÑÐ¾Ð³Ð»Ð°ÑÐ½Ð¾ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ |
| `indicesdelete` | Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð¸Ð½Ð´ÐµÐºÑÐ¾Ð² ÑÐ¾Ð³Ð»Ð°ÑÐ½Ð¾ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ |
| `snapshotschecker` | ÐÐ°Ñ…Ð¾Ð¶Ð´ÐµÐ½Ð¸Ðµ Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ñ… ÑÐ½Ð°Ð¿ÑˆÐ¾Ñ‚Ð¾Ð² |
| `snapshot-manual` | Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÐ½Ð°Ð¿ÑˆÐ¾Ñ‚Ð¾Ð² Ð¿Ð¾ Ñ„Ð»Ð°Ð³Ð°Ð¼ |
| `retention` | Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð¸Ð½Ð´ÐµÐºÑÐ¾Ð² ÑÐ¾ ÑÐ½Ð°Ð¿ÑˆÐ¾Ñ‚Ð°Ð¼Ð¸ Ð¿Ñ€Ð¸ Ð¿Ñ€ÐµÐ²Ñ‹ÑˆÐµÐ½Ð¸Ð¸ Ð½ÐµÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð³Ð¾ Ð¿Ð¾Ñ€Ð¾Ð³Ð°  |
| `dereplicator` | Ð£Ð¼ÐµÐ½ÑŒÑˆÐµÐ½Ð¸Ðµ Ñ‡Ð¸ÑÐ»Ð° Ñ€ÐµÐ¿Ð»Ð¸Ðº |
| `coldstorage` | ÐœÐ¸Ð³Ñ€Ð°Ñ†Ð¸Ñ Ð² Ñ…Ð¾Ð»Ð¾Ð´Ð½Ð¾Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ |
| `extracteddelete` | Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ extracted Ð¸Ð½Ð´ÐµÐºÑÐ¾Ð² |
| `danglingchecker` | ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° dangling Ð¸Ð½Ð´ÐµÐºÑÐ¾Ð² |

## ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ

### Ð•Ð´Ð¸Ð½Ð°Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ (`config.yaml`)

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð² `config.yaml`

### ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ð¸Ð½Ð´ÐµÐºÑÐ¾Ð² (`osctlindicesconfig.yaml`)

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð² `config-example/osctlindicesconfig.yaml`

## ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸

1. **Ð¤Ð»Ð°Ð³Ð¸ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð½Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸** (Ð½Ð°Ð¸Ð²Ñ‹ÑÑˆÐ¸Ð¹ Ð¿Ñ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚)
2. **ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ** 
3. **Ð•Ð´Ð¸Ð½Ñ‹Ð¹ ÐºÐ¾Ð½Ñ„Ð¸Ð³** (`config.yaml`)
4. **Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ** (Ð½Ð°Ð¸Ð¼ÐµÐ½ÑŒÑˆÐ¸Ð¹ Ð¿Ñ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚)

## ðŸ“š Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ

- **[ENVIRONMENT_VARIABLES_AND_FLAGS.md](ENVIRONMENT_VARIABLES_AND_FLAGS.md)** - ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ ÑÐ¿Ñ€Ð°Ð²Ð¾Ñ‡Ð½Ð¸Ðº Ð¿Ð¾ Ð²ÑÐµÐ¼ Ñ„Ð»Ð°Ð³Ð°Ð¼ Ð¸ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¼ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ
- **[ARCHITECTURE.md](ARCHITECTURE.md)** - ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ñ‹Ðµ Ð°Ð»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼Ñ‹ Ð¸ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð° ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹
- **Ð’ÑÑ‚Ñ€Ð¾ÐµÐ½Ð½Ð°Ñ ÑÐ¿Ñ€Ð°Ð²ÐºÐ°**: `osctl [ÐºÐ¾Ð¼Ð°Ð½Ð´Ð°] --help`
